(function(){function e(e,t,n,r){var i,s,o=0,u=t.length,a=n.length;while(o<u){if(r>=a)return-1;i=t.charCodeAt(o++);if(i==37){s=q[t.charAt(o++)];if(!s||(r=s(e,n,r))<0)return-1}else if(i!=n.charCodeAt(r++))return-1}return r}function t(e,t,n){return t.substring(n,n+=3).toLowerCase()in R?n:-1}function n(e,t,n){U.lastIndex=0;var r=U.exec(t.substring(n,n+10));return r?n+=r[0].length:-1}function r(e,t,n){var r=W[t.substring(n,n+=3).toLowerCase()];return r==null?-1:(e.setMonth(r),n)}function i(e,t,n){X.lastIndex=0;var r=X.exec(t.substring(n,n+12));return r?(e.setMonth(V[r[0].toLowerCase()]),n+=r[0].length):-1}function s(t,n,r){return e(t,I.c.toString(),n,r)}function o(t,n,r){return e(t,I.x.toString(),n,r)}function u(t,n,r){return e(t,I.X.toString(),n,r)}function a(e,t,n){J.lastIndex=0;var r=J.exec(t.substring(n,n+4));return r?(e.setFullYear(r[0]),n+=r[0].length):-1}function f(e,t,n){J.lastIndex=0;var r=J.exec(t.substring(n,n+2));return r?(e.setFullYear(l()+ +r[0]),n+=r[0].length):-1}function l(){return~~((new Date).getFullYear()/1e3)*1e3}function c(e,t,n){J.lastIndex=0;var r=J.exec(t.substring(n,n+2));return r?(e.setMonth(r[0]-1),n+=r[0].length):-1}function h(e,t,n){J.lastIndex=0;var r=J.exec(t.substring(n,n+2));return r?(e.setDate(+r[0]),n+=r[0].length):-1}function p(e,t,n){J.lastIndex=0;var r=J.exec(t.substring(n,n+2));return r?(e.setHours(+r[0]),n+=r[0].length):-1}function d(e,t,n){return e.hour12=!0,p(e,t,n)}function v(e,t,n){J.lastIndex=0;var r=J.exec(t.substring(n,n+2));return r?(e.setMinutes(+r[0]),n+=r[0].length):-1}function m(e,t,n){J.lastIndex=0;var r=J.exec(t.substring(n,n+2));return r?(e.setSeconds(+r[0]),n+=r[0].length):-1}function g(e,t,n){J.lastIndex=0;var r=J.exec(t.substring(n,n+3));return r?(e.setMilliseconds(+r[0]),n+=r[0].length):-1}function y(e,t,n){var r=K[t.substring(n,n+=2).toLowerCase()];return r==null?-1:(e.hour12pm=r,n)}function b(e){return new P(e.getFullYear(),0,1)}function w(e,t){return~~((t-e)/864e5-(t.getTimezoneOffset()-e.getTimezoneOffset())/1440)}function E(e){return B(1+w(b(e),e))}function S(e){var t=b(e);return H(~~((w(t,e)+t.getDay())/7))}function x(e){var t=b(e);return H(~~((w(t,e)+(t.getDay()+6)%7)/7))}function T(e){var t=e.getTimezoneOffset(),n=t>0?"-":"+",r=~~(Math.abs(t)/60),i=Math.abs(t)%60;return n+H(r)+H(i)}function N(){this._=new Date(Date.UTC.apply(this,arguments))}function C(e){return e.toISOString()}function k(e,t,n){return function(r,i,s){var o=e(r),u=[];o<r&&t(o);if(s>1)while(o<i){var a=new Date(+o);n(a)%s||u.push(a),t(o)}else while(o<i)u.push(new Date(+o)),t(o);return u}}function L(e){e.setTime(e.getTime()+6e4)}function A(e){e.setTime(e.getTime()+36e5)}function O(e,t,n){function r(t){return e(t)}return r.invert=function(t){return _(e.invert(t))},r.domain=function(t){return arguments.length?(e.domain(t),r):e.domain().map(_)},r.ticks=function(e,n){var i=M(r.domain());if(typeof e!="function"){var s=i[1]-i[0],o=s/e,u=d3.bisect(G,o,1,G.length-1);Math.log(o/G[u-1])<Math.log(G[u]/o)&&--u,e=t[u],n=e[1],e=e[0]}return e(i[0],i[1],n)},r.tickFormat=function(){return n},r.copy=function(){return O(e.copy(),t,n)},d3.rebind(r,e,"range","rangeRound","interpolate","clamp")}function M(e){var t=e[0],n=e[e.length-1];return t<n?[t,n]:[n,t]}function _(e){return new Date(e)}function D(e){return function(t){var n=e.length-1,r=e[n];while(!r[1](t))r=e[--n];return r[0](t)}}d3.time={};var P=Date;d3.time.format=function(t){function n(e){var n=[],i=-1,s=0,o,u;while(++i<r)t.charCodeAt(i)==37&&(n.push(t.substring(s,i),(u=I[o=t.charAt(++i)])?u(e):o),s=i+1);return n.push(t.substring(s,i)),n.join("")}var r=t.length;return n.parse=function(n){var r=new P(1900,0,1),i=e(r,t,n,0);if(i!=n.length)return null;if(r.hour12){var s=r.getHours()%12;r.setHours(r.hour12pm?s+12:s)}return delete r.hour12,delete r.hour12pm,r},n.toString=function(){return t},n};var H=d3.format("02d"),B=d3.format("03d"),j=d3.format("04d"),F=d3.format("2d"),I={a:function(e){return z[e.getDay()].substring(0,3)},A:function(e){return z[e.getDay()]},b:function(e){return $[e.getMonth()].substring(0,3)},B:function(e){return $[e.getMonth()]},c:d3.time.format("%a %b %e %H:%M:%S %Y"),d:function(e){return H(e.getDate())},e:function(e){return F(e.getDate())},H:function(e){return H(e.getHours())},I:function(e){return H(e.getHours()%12||12)},j:E,L:function(e){return B(e.getMilliseconds())},m:function(e){return H(e.getMonth()+1)},M:function(e){return H(e.getMinutes())},p:function(e){return e.getHours()>=12?"PM":"AM"},S:function(e){return H(e.getSeconds())},U:S,w:function(e){return e.getDay()},W:x,x:d3.time.format("%m/%d/%y"),X:d3.time.format("%H:%M:%S"),y:function(e){return H(e.getFullYear()%100)},Y:function(e){return j(e.getFullYear()%1e4)},Z:T,"%":function(e){return"%"}},q={a:t,A:n,b:r,B:i,c:s,d:h,e:h,H:p,I:d,L:g,m:c,M:v,p:y,S:m,x:o,X:u,y:f,Y:a},R={sun:3,mon:3,tue:3,wed:3,thu:3,fri:3,sat:3},U=/^(?:Sunday|Monday|Tuesday|Wednesday|Thursday|Friday|Saturday)/ig,z=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],W={jan:0,feb:1,mar:2,apr:3,may:4,jun:5,jul:6,aug:7,sep:8,oct:9,nov:10,dec:11},X=/^(?:January|February|March|April|May|June|July|August|September|October|November|December)/ig,V={january:0,february:1,march:2,april:3,may:4,june:5,july:6,august:7,september:8,october:9,november:10,december:11},$=["January","February","March","April","May","June","July","August","September","October","November","December"],J=/\s*\d+/,K={am:0,pm:1};d3.time.format.utc=function(e){function t(e){try{P=N;var t=new P;return t._=e,n(t)}finally{P=Date}}var n=d3.time.format(e);return t.parse=function(e){try{P=N;var t=n.parse(e);return t&&t._}finally{P=Date}},t.toString=n.toString,t},N.prototype={getDate:function(){return this._.getUTCDate()},getDay:function(){return this._.getUTCDay()},getFullYear:function(){return this._.getUTCFullYear()},getHours:function(){return this._.getUTCHours()},getMilliseconds:function(){return this._.getUTCMilliseconds()},getMinutes:function(){return this._.getUTCMinutes()},getMonth:function(){return this._.getUTCMonth()},getSeconds:function(){return this._.getUTCSeconds()},getTimezoneOffset:function(){return 0},valueOf:function(){return this._.getTime()},setDate:function(e){this._.setUTCDate(e)},setDay:function(e){this._.setUTCDay(e)},setFullYear:function(e){this._.setUTCFullYear(e)},setHours:function(e){this._.setUTCHours(e)},setMilliseconds:function(e){this._.setUTCMilliseconds(e)},setMinutes:function(e){this._.setUTCMinutes(e)},setMonth:function(e){this._.setUTCMonth(e)},setSeconds:function(e){this._.setUTCSeconds(e)}};var Q=d3.time.format.utc("%Y-%m-%dT%H:%M:%S.%LZ");d3.time.format.iso=Date.prototype.toISOString?C:Q,C.parse=function(e){return new Date(e)},C.toString=Q.toString,d3.time.second=function(e){return new Date(~~(e/1e3)*1e3)},d3.time.second.utc=d3.time.second,d3.time.seconds=k(d3.time.second,function(e){e.setTime(e.getTime()+1e3)},function(e){return e.getSeconds()}),d3.time.seconds.utc=d3.time.seconds,d3.time.minute=function(e){return new Date(~~(e/6e4)*6e4)},d3.time.minute.utc=d3.time.minute,d3.time.minutes=k(d3.time.minute,L,function(e){return e.getMinutes()}),d3.time.minutes.utc=k(d3.time.minute,L,function(e){return e.getUTCMinutes()}),d3.time.hour=function(e){var t=e.getTimezoneOffset()/60;return new Date((~~(e/36e5-t)+t)*36e5)},d3.time.hour.utc=function(e){return new Date(~~(e/36e5)*36e5)},d3.time.hours=k(d3.time.hour,A,function(e){return e.getHours()}),d3.time.hours.utc=k(d3.time.hour.utc,A,function(e){return e.getUTCHours()}),d3.time.day=function(e){return new Date(e.getFullYear(),e.getMonth(),e.getDate())},d3.time.day.utc=function(e){return new Date(~~(e/864e5)*864e5)},d3.time.days=k(d3.time.day,function(e){e.setDate(e.getDate()+1)},function(e){return e.getDate()-1}),d3.time.days.utc=k(d3.time.day.utc,function(e){e.setUTCDate(e.getUTCDate()+1)},function(e){return e.getUTCDate()-1}),d3.time.week=function(e){return(e=d3.time.day(e)).setDate(e.getDate()-e.getDay()),e},d3.time.week.utc=function(e){return(e=d3.time.day.utc(e)).setUTCDate(e.getUTCDate()-e.getUTCDay()),e},d3.time.weeks=k(d3.time.week,function(e){e.setDate(e.getDate()+7)},function(e){return~~((e-new Date(e.getFullYear(),0,1))/6048e5)}),d3.time.weeks.utc=k(d3.time.week.utc,function(e){e.setUTCDate(e.getUTCDate()+7)},function(e){return~~((e-Date.UTC(e.getUTCFullYear(),0,1))/6048e5)}),d3.time.month=function(e){return new Date(e.getFullYear(),e.getMonth(),1)},d3.time.month.utc=function(e){return new Date(Date.UTC(e.getUTCFullYear(),e.getUTCMonth(),1))},d3.time.months=k(d3.time.month,function(e){e.setMonth(e.getMonth()+1)},function(e){return e.getMonth()}),d3.time.months.utc=k(d3.time.month.utc,function(e){e.setUTCMonth(e.getUTCMonth()+1)},function(e){return e.getUTCMonth()}),d3.time.year=function(e){return new Date(e.getFullYear(),0,1)},d3.time.year.utc=function(e){return new Date(Date.UTC(e.getUTCFullYear(),0,1))},d3.time.years=k(d3.time.year,function(e){e.setFullYear(e.getFullYear()+1)},function(e){return e.getFullYear()}),d3.time.years.utc=k(d3.time.year.utc,function(e){e.setUTCFullYear(e.getUTCFullYear()+1)},function(e){return e.getUTCFullYear()});var G=[1e3,5e3,15e3,3e4,6e4,3e5,9e5,18e5,36e5,108e5,216e5,432e5,864e5,1728e5,6048e5,1728e6,7776e6,31536e6],Y=[[d3.time.seconds,1],[d3.time.seconds,5],[d3.time.seconds,15],[d3.time.seconds,30],[d3.time.minutes,1],[d3.time.minutes,5],[d3.time.minutes,15],[d3.time.minutes,30],[d3.time.hours,1],[d3.time.hours,3],[d3.time.hours,6],[d3.time.hours,12],[d3.time.days,1],[d3.time.days,2],[d3.time.weeks,1],[d3.time.months,1],[d3.time.months,3],[d3.time.years,1]],Z=[[d3.time.format("%Y"),function(e){return!0}],[d3.time.format("%B"),function(e){return e.getMonth()}],[d3.time.format("%b %d"),function(e){return e.getDate()!=1}],[d3.time.format("%a %d"),function(e){return e.getDay()&&e.getDate()!=1}],[d3.time.format("%I %p"),function(e){return e.getHours()}],[d3.time.format("%I:%M"),function(e){return e.getMinutes()}],[d3.time.format(":%S"),function(e){return e.getSeconds()||e.getMilliseconds()}]],et=D(Z);d3.time.scale=function(){return O(d3.scale.linear(),Y,et)};var tt=[[d3.time.seconds.utc,1],[d3.time.seconds.utc,5],[d3.time.seconds.utc,15],[d3.time.seconds.utc,30],[d3.time.minutes.utc,1],[d3.time.minutes.utc,5],[d3.time.minutes.utc,15],[d3.time.minutes.utc,30],[d3.time.hours.utc,1],[d3.time.hours.utc,3],[d3.time.hours.utc,6],[d3.time.hours.utc,12],[d3.time.days.utc,1],[d3.time.days.utc,2],[d3.time.weeks.utc,1],[d3.time.months.utc,1],[d3.time.months.utc,3],[d3.time.years.utc,1]],nt=[[d3.time.format.utc("%Y"),function(e){return!0}],[d3.time.format.utc("%B"),function(e){return e.getUTCMonth()}],[d3.time.format.utc("%b %d"),function(e){return e.getUTCDate()!=1}],[d3.time.format.utc("%a %d"),function(e){return e.getUTCDay()&&e.getUTCDate()!=1}],[d3.time.format.utc("%I %p"),function(e){return e.getUTCHours()}],[d3.time.format.utc("%I:%M"),function(e){return e.getUTCMinutes()}],[d3.time.format.utc(":%S"),function(e){return e.getUTCSeconds()||e.getUTCMilliseconds()}]],rt=D(nt);d3.time.scale.utc=function(){return O(d3.scale.linear(),tt,rt)}})();