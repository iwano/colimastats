(function(){function e(e,t){return function(n){return n&&n.type in e?e[n.type](n):t}}function t(e){return"m0,"+e+"a"+e+","+e+" 0 1,1 0,"+ -2*e+"a"+e+","+e+" 0 1,1 0,"+2*e+"z"}function n(e,t){e.type in v&&v[e.type](e,t)}function r(e,t){n(e.geometry,t)}function i(e,t){for(var r=e.features,i=0,s=r.length;i<s;i++)n(r[i].geometry,t)}function s(e,t){for(var r=e.geometries,i=0,s=r.length;i<s;i++)n(r[i],t)}function o(e,t){for(var n=e.coordinates,r=0,i=n.length;r<i;r++)t.apply(null,n[r])}function u(e,t){for(var n=e.coordinates,r=0,i=n.length;r<i;r++)for(var s=n[r],o=0,u=s.length;o<u;o++)t.apply(null,s[o])}function a(e,t){for(var n=e.coordinates,r=0,i=n.length;r<i;r++)for(var s=n[r][0],o=0,u=s.length;o<u;o++)t.apply(null,s[o])}function f(e,t){t.apply(null,e.coordinates)}function l(e,t){for(var n=e.coordinates[0],r=0,i=n.length;r<i;r++)t.apply(null,n[r])}function c(e){return e.source}function h(e){return e.target}function p(e,t){function n(e){var t=Math.sin(m-(e*=m))/g,n=Math.sin(e)/g,r=t*u*i+n*p*l,o=t*u*s+n*p*c,f=t*a+n*v;return[Math.atan2(o,r)/d,Math.atan2(f,Math.sqrt(r*r+o*o))/d]}var r=e[0]*d,i=Math.cos(r),s=Math.sin(r),o=e[1]*d,u=Math.cos(o),a=Math.sin(o),f=t[0]*d,l=Math.cos(f),c=Math.sin(f),h=t[1]*d,p=Math.cos(h),v=Math.sin(h),m=n.d=Math.acos(Math.max(-1,Math.min(1,a*v+u*p*Math.cos(f-r)))),g=Math.sin(m);return n}d3.geo={};var d=Math.PI/180;d3.geo.azimuthal=function(){function e(e){var n=e[0]*d-s,o=e[1]*d,f=Math.cos(n),l=Math.sin(n),c=Math.cos(o),h=Math.sin(o),p=t!=="orthographic"?a*h+u*c*f:null,v,m=t==="stereographic"?1/(1+p):t==="gnomonic"?1/p:t==="equidistant"?(v=Math.acos(p),v?v/Math.sin(v):0):t==="equalarea"?Math.sqrt(2/(1+p)):1,g=m*c*l,y=m*(a*c*f-u*h);return[r*g+i[0],r*y+i[1]]}var t="orthographic",n,r=200,i=[480,250],s,o,u,a;return e.invert=function(e){var n=(e[0]-i[0])/r,o=(e[1]-i[1])/r,f=Math.sqrt(n*n+o*o),l=t==="stereographic"?2*Math.atan(f):t==="gnomonic"?Math.atan(f):t==="equidistant"?f:t==="equalarea"?2*Math.asin(.5*f):Math.asin(f),c=Math.sin(l),h=Math.cos(l);return[(s+Math.atan2(n*c,f*u*h+o*a*c))/d,Math.asin(h*a-(f?o*c*u/f:0))/d]},e.mode=function(n){return arguments.length?(t=n+"",e):t},e.origin=function(t){return arguments.length?(n=t,s=n[0]*d,o=n[1]*d,u=Math.cos(o),a=Math.sin(o),e):n},e.scale=function(t){return arguments.length?(r=+t,e):r},e.translate=function(t){return arguments.length?(i=[+t[0],+t[1]],e):i},e.origin([0,0])},d3.geo.albers=function(){function e(e){var t=u*(d*e[0]-o),n=Math.sqrt(a-2*u*Math.sin(d*e[1]))/u;return[i*n*Math.sin(t)+s[0],i*(n*Math.cos(t)-f)+s[1]]}function t(){var t=d*r[0],i=d*r[1],s=d*n[1],l=Math.sin(t),c=Math.cos(t);return o=d*n[0],u=.5*(l+Math.sin(i)),a=c*c+2*u*l,f=Math.sqrt(a-2*u*Math.sin(s))/u,e}var n=[-98,38],r=[29.5,45.5],i=1e3,s=[480,250],o,u,a,f;return e.invert=function(e){var t=(e[0]-s[0])/i,n=(e[1]-s[1])/i,r=f+n,l=Math.atan2(t,r),c=Math.sqrt(t*t+r*r);return[(o+l/u)/d,Math.asin((a-c*c*u*u)/(2*u))/d]},e.origin=function(e){return arguments.length?(n=[+e[0],+e[1]],t()):n},e.parallels=function(e){return arguments.length?(r=[+e[0],+e[1]],t()):r},e.scale=function(t){return arguments.length?(i=+t,e):i},e.translate=function(t){return arguments.length?(s=[+t[0],+t[1]],e):s},t()},d3.geo.albersUsa=function(){function e(e){var s=e[0],o=e[1];return(o>50?n:s<-140?r:o<21?i:t)(e)}var t=d3.geo.albers(),n=d3.geo.albers().origin([-160,60]).parallels([55,65]),r=d3.geo.albers().origin([-160,20]).parallels([8,18]),i=d3.geo.albers().origin([-60,10]).parallels([8,18]);return e.scale=function(s){return arguments.length?(t.scale(s),n.scale(s*.6),r.scale(s),i.scale(s*1.5),e.translate(t.translate())):t.scale()},e.translate=function(s){if(!arguments.length)return t.translate();var o=t.scale()/1e3,u=s[0],a=s[1];return t.translate(s),n.translate([u-400*o,a+170*o]),r.translate([u-190*o,a+200*o]),i.translate([u+580*o,a+430*o]),e},e.scale(t.scale())},d3.geo.bonne=function(){function e(e){var u=e[0]*d-r,a=e[1]*d-i;if(s){var f=o+s-a,l=u*Math.cos(a)/f;u=f*Math.sin(l),a=f*Math.cos(l)-o}else u*=Math.cos(a),a*=-1;return[t*u+n[0],t*a+n[1]]}var t=200,n=[480,250],r,i,s,o;return e.invert=function(e){var i=(e[0]-n[0])/t,u=(e[1]-n[1])/t;if(s){var a=o+u,f=Math.sqrt(i*i+a*a);u=o+s-f,i=r+f*Math.atan2(i,a)/Math.cos(u)}else u*=-1,i/=Math.cos(u);return[i/d,u/d]},e.parallel=function(t){return arguments.length?(o=1/Math.tan(s=t*d),e):s/d},e.origin=function(t){return arguments.length?(r=t[0]*d,i=t[1]*d,e):[r/d,i/d]},e.scale=function(n){return arguments.length?(t=+n,e):t},e.translate=function(t){return arguments.length?(n=[+t[0],+t[1]],e):n},e.origin([0,0]).parallel(45)},d3.geo.equirectangular=function(){function e(e){var r=e[0]/360,i=-e[1]/360;return[t*r+n[0],t*i+n[1]]}var t=500,n=[480,250];return e.invert=function(e){var r=(e[0]-n[0])/t,i=(e[1]-n[1])/t;return[360*r,-360*i]},e.scale=function(n){return arguments.length?(t=+n,e):t},e.translate=function(t){return arguments.length?(n=[+t[0],+t[1]],e):n},e},d3.geo.mercator=function(){function e(e){var r=e[0]/360,i=-(Math.log(Math.tan(Math.PI/4+e[1]*d/2))/d)/360;return[t*r+n[0],t*Math.max(-0.5,Math.min(.5,i))+n[1]]}var t=500,n=[480,250];return e.invert=function(e){var r=(e[0]-n[0])/t,i=(e[1]-n[1])/t;return[360*r,2*Math.atan(Math.exp(-360*i*d))/d-90]},e.scale=function(n){return arguments.length?(t=+n,e):t},e.translate=function(t){return arguments.length?(n=[+t[0],+t[1]],e):n},e},d3.geo.path=function(){function n(e,n){return typeof u=="function"&&(a=t(u.apply(this,arguments))),l(e)||null}function r(e){return f(e).join(",")}function i(e){var t=o(e[0]),n=0,r=e.length;while(++n<r)t-=o(e[n]);return t}function s(e){var t=d3.geom.polygon(e[0].map(f)),n=t.area(),r=t.centroid(n<0?(n*=-1,1):-1),i=r[0],s=r[1],o=n,u=0,a=e.length;while(++u<a)t=d3.geom.polygon(e[u].map(f)),n=t.area(),r=t.centroid(n<0?(n*=-1,1):-1),i-=r[0],s-=r[1],o-=n;return[i,s,6*o]}function o(e){return Math.abs(d3.geom.polygon(e.map(f)).area())}var u=4.5,a=t(u),f=d3.geo.albersUsa(),l=e({FeatureCollection:function(e){var t=[],n=e.features,r=-1,i=n.length;while(++r<i)t.push(l(n[r].geometry));return t.join("")},Feature:function(e){return l(e.geometry)},Point:function(e){return"M"+r(e.coordinates)+a},MultiPoint:function(e){var t=[],n=e.coordinates,i=-1,s=n.length;while(++i<s)t.push("M",r(n[i]),a);return t.join("")},LineString:function(e){var t=["M"],n=e.coordinates,i=-1,s=n.length;while(++i<s)t.push(r(n[i]),"L");return t.pop(),t.join("")},MultiLineString:function(e){var t=[],n=e.coordinates,i=-1,s=n.length,o,u,a;while(++i<s){o=n[i],u=-1,a=o.length,t.push("M");while(++u<a)t.push(r(o[u]),"L");t.pop()}return t.join("")},Polygon:function(e){var t=[],n=e.coordinates,i=-1,s=n.length,o,u,a;while(++i<s){o=n[i],u=-1;if((a=o.length-1)>0){t.push("M");while(++u<a)t.push(r(o[u]),"L");t[t.length-1]="Z"}}return t.join("")},MultiPolygon:function(e){var t=[],n=e.coordinates,i=-1,s=n.length,o,u,a,f,l,c;while(++i<s){o=n[i],u=-1,a=o.length;while(++u<a){f=o[u],l=-1;if((c=f.length-1)>0){t.push("M");while(++l<c)t.push(r(f[l]),"L");t[t.length-1]="Z"}}}return t.join("")},GeometryCollection:function(e){var t=[],n=e.geometries,r=-1,i=n.length;while(++r<i)t.push(l(n[r]));return t.join("")}}),c=n.area=e({FeatureCollection:function(e){var t=0,n=e.features,r=-1,i=n.length;while(++r<i)t+=c(n[r]);return t},Feature:function(e){return c(e.geometry)},Polygon:function(e){return i(e.coordinates)},MultiPolygon:function(e){var t=0,n=e.coordinates,r=-1,s=n.length;while(++r<s)t+=i(n[r]);return t},GeometryCollection:function(e){var t=0,n=e.geometries,r=-1,i=n.length;while(++r<i)t+=c(n[r]);return t}},0),h=n.centroid=e({Feature:function(e){return h(e.geometry)},Polygon:function(e){var t=s(e.coordinates);return[t[0]/t[2],t[1]/t[2]]},MultiPolygon:function(e){var t=0,n=e.coordinates,r,i=0,o=0,u=0,a=-1,f=n.length;while(++a<f)r=s(n[a]),i+=r[0],o+=r[1],u+=r[2];return[i/u,o/u]}});return n.projection=function(e){return f=e,n},n.pointRadius=function(e){return typeof e=="function"?u=e:(u=+e,a=t(u)),n},n},d3.geo.bounds=function(e){var t=Infinity,r=Infinity,i=-Infinity,s=-Infinity;return n(e,function(e,n){e<t&&(t=e),e>i&&(i=e),n<r&&(r=n),n>s&&(s=n)}),[[t,r],[i,s]]};var v={Feature:r,FeatureCollection:i,GeometryCollection:s,LineString:o,MultiLineString:u,MultiPoint:o,MultiPolygon:a,Point:f,Polygon:l};d3.geo.circle=function(){function t(){}function n(e){return a.distance(e)<u}function r(e){var t=-1,n=e.length,r=[],s,o,f,l,c;while(++t<n)c=a.distance(f=e[t]),c<u?(o&&r.push(p(o,f)((l-u)/(l-c))),r.push(f),s=o=null):(o=f,!s&&r.length&&(r.push(p(r[r.length-1],o)((u-l)/(c-l))),s=o)),l=c;return o&&r.length&&(c=a.distance(f=r[0]),r.push(p(o,f)((l-u)/(l-c)))),i(r)}function i(e){var t=0,n=e.length,r,i,s=n?[e[0]]:e,o,u=a.source();while(++t<n){o=a.source(e[t-1])(e[t]).coordinates;for(r=0,i=o.length;++r<i;)s.push(o[r])}return a.source(u),s}var s=[0,0],o=89.99,u=o*d,a=d3.geo.greatArc().target(Object);t.clip=function(e){return a.source(typeof s=="function"?s.apply(this,arguments):s),f(e)};var f=e({FeatureCollection:function(e){var t=e.features.map(f).filter(Object);return t&&(e=Object.create(e),e.features=t,e)},Feature:function(e){var t=f(e.geometry);return t&&(e=Object.create(e),e.geometry=t,e)},Point:function(e){return n(e.coordinates)&&e},MultiPoint:function(e){var t=e.coordinates.filter(n);return t.length&&{type:e.type,coordinates:t}},LineString:function(e){var t=r(e.coordinates);return t.length&&(e=Object.create(e),e.coordinates=t,e)},MultiLineString:function(e){var t=e.coordinates.map(r).filter(function(e){return e.length});return t.length&&(e=Object.create(e),e.coordinates=t,e)},Polygon:function(e){var t=e.coordinates.map(r);return t[0].length&&(e=Object.create(e),e.coordinates=t,e)},MultiPolygon:function(e){var t=e.coordinates.map(function(e){return e.map(r)}).filter(function(e){return e[0].length});return t.length&&(e=Object.create(e),e.coordinates=t,e)},GeometryCollection:function(e){var t=e.geometries.map(f).filter(Object);return t.length&&(e=Object.create(e),e.geometries=t,e)}});return t.origin=function(e){return arguments.length?(s=e,t):s},t.angle=function(e){return arguments.length?(u=(o=+e)*d,t):o},t.precision=function(e){return arguments.length?(a.precision(e),t):a.precision()},t},d3.geo.greatArc=function(){function e(){var e=typeof t=="function"?t.apply(this,arguments):t,i=typeof n=="function"?n.apply(this,arguments):n,s=p(e,i),o=r/s.d,u=0,a=[e];while((u+=o)<1)a.push(s(u));return a.push(i),{type:"LineString",coordinates:a}}var t=c,n=h,r=6*d;return e.distance=function(){var e=typeof t=="function"?t.apply(this,arguments):t,r=typeof n=="function"?n.apply(this,arguments):n;return p(e,r).d},e.source=function(n){return arguments.length?(t=n,e):t},e.target=function(t){return arguments.length?(n=t,e):n},e.precision=function(t){return arguments.length?(r=t*d,e):r/d},e},d3.geo.greatCircle=d3.geo.circle})();