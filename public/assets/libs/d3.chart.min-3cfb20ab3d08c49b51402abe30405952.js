(function(){function e(e){return[0,e.length-1]}function t(e){return[d3.quantile(e,.25),d3.quantile(e,.5),d3.quantile(e,.75)]}function n(e){return e.ranges}function r(e){return e.markers}function i(e){return e.measures}function s(e){return function(t){return"translate("+e(t)+",0)"}}function o(e){var t=e(0);return function(n){return Math.abs(e(n)-t)}}function u(e){return e[0]}function a(e){return e[1]}function f(e,t){var n=t.length-1;return t=t.slice().sort(d3.ascending),d3.range(e).map(function(r){return t[~~(r*n/e)]})}function l(e){return e.x}function c(e){return e.y}d3.chart={},d3.chart.box=function(){function n(e){e.each(function(e,t){e=e.map(u).sort(d3.ascending);var n=d3.select(this),c=e.length,h=e[0],p=e[c-1],v=e.quartiles=f(e),m=a&&a.call(this,e,t),y=m&&m.map(function(t){return e[t]}),b=m?d3.range(0,m[0]).concat(d3.range(m[1]+1,c)):d3.range(c),w=d3.scale.linear().domain(o&&o.call(this,e,t)||[h,p]).range([i,0]),E=this.__chart__||d3.scale.linear().domain([0,Infinity]).range(w.range());this.__chart__=w;var S=n.selectAll("line.center").data(y?[y]:[]);S.enter().insert("svg:line","rect").attr("class","center").attr("x1",r/2).attr("y1",function(e){return E(e[0])}).attr("x2",r/2).attr("y2",function(e){return E(e[1])}).style("opacity",1e-6).transition().duration(s).style("opacity",1).attr("y1",function(e){return w(e[0])}).attr("y2",function(e){return w(e[1])}),S.transition().duration(s).style("opacity",1).attr("y1",function(e){return w(e[0])}).attr("y2",function(e){return w(e[1])}),S.exit().transition().duration(s).style("opacity",1e-6).attr("y1",function(e){return w(e[0])}).attr("y2",function(e){return w(e[1])}).remove();var x=n.selectAll("rect.box").data([v]);x.enter().append("svg:rect").attr("class","box").attr("x",0).attr("y",function(e){return E(e[2])}).attr("width",r).attr("height",function(e){return E(e[0])-E(e[2])}).transition().duration(s).attr("y",function(e){return w(e[2])}).attr("height",function(e){return w(e[0])-w(e[2])}),x.transition().duration(s).attr("y",function(e){return w(e[2])}).attr("height",function(e){return w(e[0])-w(e[2])});var T=n.selectAll("line.median").data([v[1]]);T.enter().append("svg:line").attr("class","median").attr("x1",0).attr("y1",E).attr("x2",r).attr("y2",E).transition().duration(s).attr("y1",w).attr("y2",w),T.transition().duration(s).attr("y1",w).attr("y2",w);var N=n.selectAll("line.whisker").data(y||[]);N.enter().insert("svg:line","circle, text").attr("class","whisker").attr("x1",0).attr("y1",E).attr("x2",r).attr("y2",E).style("opacity",1e-6).transition().duration(s).attr("y1",w).attr("y2",w).style("opacity",1),N.transition().duration(s).attr("y1",w).attr("y2",w).style("opacity",1),N.exit().transition().duration(s).attr("y1",w).attr("y2",w).style("opacity",1e-6).remove();var C=n.selectAll("circle.outlier").data(b,Number);C.enter().insert("svg:circle","text").attr("class","outlier").attr("r",5).attr("cx",r/2).attr("cy",function(t){return E(e[t])}).style("opacity",1e-6).transition().duration(s).attr("cy",function(t){return w(e[t])}).style("opacity",1),C.transition().duration(s).attr("cy",function(t){return w(e[t])}).style("opacity",1),C.exit().transition().duration(s).attr("cy",function(t){return w(e[t])}).style("opacity",1e-6).remove();var k=l||w.tickFormat(8),L=n.selectAll("text.box").data(v);L.enter().append("svg:text").attr("class","box").attr("dy",".3em").attr("dx",function(e,t){return t&1?6:-6}).attr("x",function(e,t){return t&1?r:0}).attr("y",E).attr("text-anchor",function(e,t){return t&1?"start":"end"}).text(k).transition().duration(s).attr("y",w),L.transition().duration(s).text(k).attr("y",w);var A=n.selectAll("text.whisker").data(y||[]);A.enter().append("svg:text").attr("class","whisker").attr("dy",".3em").attr("dx",6).attr("x",r).attr("y",E).text(k).style("opacity",1e-6).transition().duration(s).attr("y",w).style("opacity",1),A.transition().duration(s).text(k).attr("y",w).style("opacity",1),A.exit().transition().duration(s).attr("y",w).style("opacity",1e-6).remove()}),d3.timer.flush()}var r=1,i=1,s=0,o=null,u=Number,a=e,f=t,l=null;return n.width=function(e){return arguments.length?(r=e,n):r},n.height=function(e){return arguments.length?(i=e,n):i},n.tickFormat=function(e){return arguments.length?(l=e,n):l},n.duration=function(e){return arguments.length?(s=e,n):s},n.domain=function(e){return arguments.length?(o=e==null?e:d3.functor(e),n):o},n.value=function(e){return arguments.length?(u=e,n):u},n.whiskers=function(e){return arguments.length?(a=e,n):a},n.quartiles=function(e){return arguments.length?(f=e,n):f},n},d3.chart.bullet=function(){function e(e){e.each(function(e,t){var n=f.call(this,e,t).slice().sort(d3.descending),r=l.call(this,e,t).slice().sort(d3.descending),i=c.call(this,e,t).slice().sort(d3.descending),d=d3.select(this),y=d3.scale.linear().domain([0,Math.max(n[0],r[0],i[0])]).range(u?[h,0]:[0,h]),w=this.__chart__||d3.scale.linear().domain([0,Infinity]).range(y.range());this.__chart__=y;var E=o(w),S=o(y),x=d.selectAll("rect.range").data(n);x.enter().append("svg:rect").attr("class",function(e,t){return"range s"+t}).attr("width",E).attr("height",p).attr("x",u?w:0).transition().duration(a).attr("width",S).attr("x",u?y:0),x.transition().duration(a).attr("x",u?y:0).attr("width",S).attr("height",p);var T=d.selectAll("rect.measure").data(i);T.enter().append("svg:rect").attr("class",function(e,t){return"measure s"+t}).attr("width",E).attr("height",p/3).attr("x",u?w:0).attr("y",p/3).transition().duration(a).attr("width",S).attr("x",u?y:0),T.transition().duration(a).attr("width",S).attr("height",p/3).attr("x",u?y:0).attr("y",p/3);var N=d.selectAll("line.marker").data(r);N.enter().append("svg:line").attr("class","marker").attr("x1",w).attr("x2",w).attr("y1",p/6).attr("y2",p*5/6).transition().duration(a).attr("x1",y).attr("x2",y),N.transition().duration(a).attr("x1",y).attr("x2",y).attr("y1",p/6).attr("y2",p*5/6);var C=v||y.tickFormat(8),L=d.selectAll("g.tick").data(y.ticks(8),function(e){return this.textContent||C(e)}),A=L.enter().append("svg:g").attr("class","tick").attr("transform",s(w)).style("opacity",1e-6);A.append("svg:line").attr("y1",p).attr("y2",p*7/6),A.append("svg:text").attr("text-anchor","middle").attr("dy","1em").attr("y",p*7/6).text(C),A.transition().duration(a).attr("transform",s(y)).style("opacity",1);var O=L.transition().duration(a).attr("transform",s(y)).style("opacity",1);O.select("line").attr("y1",p).attr("y2",p*7/6),O.select("text").attr("y",p*7/6),L.exit().transition().duration(a).attr("transform",s(y)).style("opacity",1e-6).remove()}),d3.timer.flush()}var t="left",u=!1,a=0,f=n,l=r,c=i,h=380,p=30,v=null;return e.orient=function(n){return arguments.length?(t=n,u=t=="right"||t=="bottom",e):t},e.ranges=function(t){return arguments.length?(f=t,e):f},e.markers=function(t){return arguments.length?(l=t,e):l},e.measures=function(t){return arguments.length?(c=t,e):c},e.width=function(t){return arguments.length?(h=t,e):h},e.height=function(t){return arguments.length?(p=t,e):p},e.tickFormat=function(t){return arguments.length?(v=t,e):v},e.duration=function(t){return arguments.length?(a=t,e):a},e},d3.chart.horizon=function(){function e(e){e.each(function(e,u){var a=d3.select(this),v=2*t+1,y=Infinity,w=-Infinity,E=-Infinity,S,x,T,N=e.map(function(e,t){var n=i.call(this,e,t),r=s.call(this,e,t);return n<y&&(y=n),n>w&&(w=n),-r>E&&(E=-r),r>E&&(E=r),[n,r]}),C=d3.scale.linear().domain([y,w]).range([0,o]),k=d3.scale.linear().domain([0,E]).range([0,f*t]);this.__chart__?(S=this.__chart__.x,x=this.__chart__.y,T=this.__chart__.id):(S=d3.scale.linear().domain([0,Infinity]).range(C.range()),x=d3.scale.linear().domain([0,Infinity]).range(k.range()),T=++p);var L=a.selectAll("defs").data([N]),A=L.enter().append("svg:defs");A.append("svg:clipPath").attr("id","d3_chart_horizon_clip"+T).append("svg:rect").attr("width",o).attr("height",f),L.select("rect").transition().duration(l).attr("width",o).attr("height",f),A.append("svg:path").attr("id","d3_chart_horizon_path"+T).attr("d",h.interpolate(r).x(function(e){return S(e[0])}).y0(f*t).y1(function(e){return f*t-x(e[1])})).transition().duration(l).attr("d",h.x(function(e){return C(e[0])}).y1(function(e){return f*t-k(e[1])})),L.select("path").transition().duration(l).attr("d",h),a.selectAll("g").data([null]).enter().append("svg:g").attr("clip-path","url(#d3_chart_horizon_clip"+T+")");var O=n=="offset"?function(e){return"translate(0,"+(e+(e<0)-t)*f+")"}:function(e){return(e<0?"scale(1,-1)":"")+"translate(0,"+(e-t)*f+")"},M=a.select("g").selectAll("use").data(d3.range(-1,-t-1,-1).concat(d3.range(1,t+1)),Number);M.enter().append("svg:use").attr("xlink:href","#d3_chart_horizon_path"+T).attr("transform",function(e){return O(e+(e>0?1:-1))}).style("fill",c).transition().duration(l).attr("transform",O),M.transition().duration(l).attr("transform",O).style("fill",c),M.exit().transition().duration(l).attr("transform",O).remove(),this.__chart__={x:C,y:k,id:T}}),d3.timer.flush()}var t=1,n="offset",r="linear",i=u,s=a,o=960,f=40,l=0,c=d3.scale.linear().domain([-1,0,1]).range(["#d62728","#fff","#1f77b4"]);return e.duration=function(t){return arguments.length?(l=+t,e):l},e.bands=function(n){return arguments.length?(t=+n,c.domain([-t,0,t]),e):t},e.mode=function(t){return arguments.length?(n=t+"",e):n},e.colors=function(t){return arguments.length?(c.range(t),e):c.range()},e.interpolate=function(t){return arguments.length?(r=t+"",e):r},e.x=function(t){return arguments.length?(i=t,e):i},e.y=function(t){return arguments.length?(s=t,e):s},e.width=function(t){return arguments.length?(o=+t,e):o},e.height=function(t){return arguments.length?(f=+t,e):f},e};var h=d3.svg.area(),p=0;d3.chart.qq=function(){function e(e){e.each(function(e,l){var c=d3.select(this),h=f(o,u.call(this,e,l)),p=f(o,a.call(this,e,l)),v=i&&i.call(this,e,l)||[d3.min(h),d3.max(h)],m=i&&i.call(this,e,l)||[d3.min(p),d3.max(p)],y,w,E=d3.scale.linear().domain(v).range([0,t]),S=d3.scale.linear().domain(m).range([n,0]);this.__chart__?(y=this.__chart__.x,w=this.__chart__.y):(y=d3.scale.linear().domain([0,Infinity]).range(E.range()),w=d3.scale.linear().domain([0,Infinity]).range(S.range())),this.__chart__={x:E,y:S};var x=c.selectAll("line.diagonal").data([null]);x.enter().append("svg:line").attr("class","diagonal").attr("x1",E(m[0])).attr("y1",S(v[0])).attr("x2",E(m[1])).attr("y2",S(v[1])),x.transition().duration(r).attr("x1",E(m[0])).attr("y1",S(v[0])).attr("x2",E(m[1])).attr("y2",S(v[1]));var T=c.selectAll("circle").data(d3.range(o).map(function(e){return{x:h[e],y:p[e]}}));T.enter().append("svg:circle").attr("class","quantile").attr("r",4.5).attr("cx",function(e){return y(e.x)}).attr("cy",function(e){return w(e.y)}).style("opacity",1e-6).transition().duration(r).attr("cx",function(e){return E(e.x)}).attr("cy",function(e){return S(e.y)}).style("opacity",1),T.transition().duration(r).attr("cx",function(e){return E(e.x)}).attr("cy",function(e){return S(e.y)}).style("opacity",1),T.exit().transition().duration(r).attr("cx",function(e){return E(e.x)}).attr("cy",function(e){return S(e.y)}).style("opacity",1e-6).remove();var N=s||E.tickFormat(4),C=s||S.tickFormat(4),k=function(e){return"translate("+E(e)+","+n+")"},L=function(e){return"translate(0,"+S(e)+")"},A=c.selectAll("g.x.tick").data(E.ticks(4),function(e){return this.textContent||N(e)}),O=A.enter().append("svg:g").attr("class","x tick").attr("transform",function(e){return"translate("+y(e)+","+n+")"}).style("opacity",1e-6);O.append("svg:line").attr("y1",0).attr("y2",-6),O.append("svg:text").attr("text-anchor","middle").attr("dy","1em").text(N),O.transition().duration(r).attr("transform",k).style("opacity",1),A.transition().duration(r).attr("transform",k).style("opacity",1),A.exit().transition().duration(r).attr("transform",k).style("opacity",1e-6).remove();var M=c.selectAll("g.y.tick").data(S.ticks(4),function(e){return this.textContent||C(e)}),_=M.enter().append("svg:g").attr("class","y tick").attr("transform",function(e){return"translate(0,"+w(e)+")"}).style("opacity",1e-6);_.append("svg:line").attr("x1",0).attr("x2",6),_.append("svg:text").attr("text-anchor","end").attr("dx","-.5em").attr("dy",".3em").text(C),_.transition().duration(r).attr("transform",L).style("opacity",1),M.transition().duration(r).attr("transform",L).style("opacity",1),M.exit().transition().duration(r).attr("transform",L).style("opacity",1e-6).remove()})}var t=1,n=1,r=0,i=null,s=null,o=100,u=l,a=c;return e.width=function(n){return arguments.length?(t=n,e):t},e.height=function(t){return arguments.length?(n=t,e):n},e.duration=function(t){return arguments.length?(r=t,e):r},e.domain=function(t){return arguments.length?(i=t==null?t:d3.functor(t),e):i},e.count=function(t){return arguments.length?(o=t,e):o},e.x=function(t){return arguments.length?(u=t,e):u},e.y=function(t){return arguments.length?(a=t,e):a},e.tickFormat=function(t){return arguments.length?(s=t,e):s},e}})();