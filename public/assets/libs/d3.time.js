(function(){function t(e,t,n,r){var i,s,o=0,a=t.length,f=n.length;while(o<a){if(r>=f)return-1;i=t.charCodeAt(o++);if(i==37){s=u[t.charAt(o++)];if(!s||(r=s(e,n,r))<0)return-1}else if(i!=n.charCodeAt(r++))return-1}return r}function a(e,t,n){return t.substring(n,n+=3).toLowerCase()in f?n:-1}function l(e,t,n){c.lastIndex=0;var r=c.exec(t.substring(n,n+10));return r?n+=r[0].length:-1}function p(e,t,n){var r=d[t.substring(n,n+=3).toLowerCase()];return r==null?-1:(e.setMonth(r),n)}function v(e,t,n){m.lastIndex=0;var r=m.exec(t.substring(n,n+12));return r?(e.setMonth(g[r[0].toLowerCase()]),n+=r[0].length):-1}function b(e,n,r){return t(e,o.c.toString(),n,r)}function w(e,n,r){return t(e,o.x.toString(),n,r)}function E(e,n,r){return t(e,o.X.toString(),n,r)}function S(e,t,n){_.lastIndex=0;var r=_.exec(t.substring(n,n+4));return r?(e.setFullYear(r[0]),n+=r[0].length):-1}function x(e,t,n){_.lastIndex=0;var r=_.exec(t.substring(n,n+2));return r?(e.setFullYear(T()+ +r[0]),n+=r[0].length):-1}function T(){return~~((new Date).getFullYear()/1e3)*1e3}function N(e,t,n){_.lastIndex=0;var r=_.exec(t.substring(n,n+2));return r?(e.setMonth(r[0]-1),n+=r[0].length):-1}function C(e,t,n){_.lastIndex=0;var r=_.exec(t.substring(n,n+2));return r?(e.setDate(+r[0]),n+=r[0].length):-1}function k(e,t,n){_.lastIndex=0;var r=_.exec(t.substring(n,n+2));return r?(e.setHours(+r[0]),n+=r[0].length):-1}function L(e,t,n){return e.hour12=!0,k(e,t,n)}function A(e,t,n){_.lastIndex=0;var r=_.exec(t.substring(n,n+2));return r?(e.setMinutes(+r[0]),n+=r[0].length):-1}function O(e,t,n){_.lastIndex=0;var r=_.exec(t.substring(n,n+2));return r?(e.setSeconds(+r[0]),n+=r[0].length):-1}function M(e,t,n){_.lastIndex=0;var r=_.exec(t.substring(n,n+3));return r?(e.setMilliseconds(+r[0]),n+=r[0].length):-1}function D(e,t,n){var r=P[t.substring(n,n+=2).toLowerCase()];return r==null?-1:(e.hour12pm=r,n)}function H(t){return new e(t.getFullYear(),0,1)}function B(e,t){return~~((t-e)/864e5-(t.getTimezoneOffset()-e.getTimezoneOffset())/1440)}function j(e){return r(1+B(H(e),e))}function F(e){var t=H(e);return n(~~((B(t,e)+t.getDay())/7))}function I(e){var t=H(e);return n(~~((B(t,e)+(t.getDay()+6)%7)/7))}function q(e){var t=e.getTimezoneOffset(),r=t>0?"-":"+",i=~~(Math.abs(t)/60),s=Math.abs(t)%60;return r+n(i)+n(s)}function R(){this._=new Date(Date.UTC.apply(this,arguments))}function z(e){return e.toISOString()}function W(e,t,n){return function(r,i,s){var o=e(r),u=[];o<r&&t(o);if(s>1)while(o<i){var a=new Date(+o);n(a)%s||u.push(a),t(o)}else while(o<i)u.push(new Date(+o)),t(o);return u}}function X(e){e.setTime(e.getTime()+6e4)}function V(e){e.setTime(e.getTime()+36e5)}function $(e,t,n){function r(t){return e(t)}return r.invert=function(t){return K(e.invert(t))},r.domain=function(t){return arguments.length?(e.domain(t),r):e.domain().map(K)},r.ticks=function(e,n){var i=J(r.domain());if(typeof e!="function"){var s=i[1]-i[0],o=s/e,u=d3.bisect(G,o,1,G.length-1);Math.log(o/G[u-1])<Math.log(G[u]/o)&&--u,e=t[u],n=e[1],e=e[0]}return e(i[0],i[1],n)},r.tickFormat=function(){return n},r.copy=function(){return $(e.copy(),t,n)},d3.rebind(r,e,"range","rangeRound","interpolate","clamp")}function J(e){var t=e[0],n=e[e.length-1];return t<n?[t,n]:[n,t]}function K(e){return new Date(e)}function Q(e){return function(t){var n=e.length-1,r=e[n];while(!r[1](t))r=e[--n];return r[0](t)}}d3.time={};var e=Date;d3.time.format=function(n){function i(e){var t=[],i=-1,s=0,u,a;while(++i<r)n.charCodeAt(i)==37&&(t.push(n.substring(s,i),(a=o[u=n.charAt(++i)])?a(e):u),s=i+1);return t.push(n.substring(s,i)),t.join("")}var r=n.length;return i.parse=function(r){var i=new e(1900,0,1),s=t(i,n,r,0);if(s!=r.length)return null;if(i.hour12){var o=i.getHours()%12;i.setHours(i.hour12pm?o+12:o)}return delete i.hour12,delete i.hour12pm,i},i.toString=function(){return n},i};var n=d3.format("02d"),r=d3.format("03d"),i=d3.format("04d"),s=d3.format("2d"),o={a:function(e){return h[e.getDay()].substring(0,3)},A:function(e){return h[e.getDay()]},b:function(e){return y[e.getMonth()].substring(0,3)},B:function(e){return y[e.getMonth()]},c:d3.time.format("%a %b %e %H:%M:%S %Y"),d:function(e){return n(e.getDate())},e:function(e){return s(e.getDate())},H:function(e){return n(e.getHours())},I:function(e){return n(e.getHours()%12||12)},j:j,L:function(e){return r(e.getMilliseconds())},m:function(e){return n(e.getMonth()+1)},M:function(e){return n(e.getMinutes())},p:function(e){return e.getHours()>=12?"PM":"AM"},S:function(e){return n(e.getSeconds())},U:F,w:function(e){return e.getDay()},W:I,x:d3.time.format("%m/%d/%y"),X:d3.time.format("%H:%M:%S"),y:function(e){return n(e.getFullYear()%100)},Y:function(e){return i(e.getFullYear()%1e4)},Z:q,"%":function(e){return"%"}},u={a:a,A:l,b:p,B:v,c:b,d:C,e:C,H:k,I:L,L:M,m:N,M:A,p:D,S:O,x:w,X:E,y:x,Y:S},f={sun:3,mon:3,tue:3,wed:3,thu:3,fri:3,sat:3},c=/^(?:Sunday|Monday|Tuesday|Wednesday|Thursday|Friday|Saturday)/ig,h=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],d={jan:0,feb:1,mar:2,apr:3,may:4,jun:5,jul:6,aug:7,sep:8,oct:9,nov:10,dec:11},m=/^(?:January|February|March|April|May|June|July|August|September|October|November|December)/ig,g={january:0,february:1,march:2,april:3,may:4,june:5,july:6,august:7,september:8,october:9,november:10,december:11},y=["January","February","March","April","May","June","July","August","September","October","November","December"],_=/\s*\d+/,P={am:0,pm:1};d3.time.format.utc=function(t){function r(t){try{e=R;var r=new e;return r._=t,n(r)}finally{e=Date}}var n=d3.time.format(t);return r.parse=function(t){try{e=R;var r=n.parse(t);return r&&r._}finally{e=Date}},r.toString=n.toString,r},R.prototype={getDate:function(){return this._.getUTCDate()},getDay:function(){return this._.getUTCDay()},getFullYear:function(){return this._.getUTCFullYear()},getHours:function(){return this._.getUTCHours()},getMilliseconds:function(){return this._.getUTCMilliseconds()},getMinutes:function(){return this._.getUTCMinutes()},getMonth:function(){return this._.getUTCMonth()},getSeconds:function(){return this._.getUTCSeconds()},getTimezoneOffset:function(){return 0},valueOf:function(){return this._.getTime()},setDate:function(e){this._.setUTCDate(e)},setDay:function(e){this._.setUTCDay(e)},setFullYear:function(e){this._.setUTCFullYear(e)},setHours:function(e){this._.setUTCHours(e)},setMilliseconds:function(e){this._.setUTCMilliseconds(e)},setMinutes:function(e){this._.setUTCMinutes(e)},setMonth:function(e){this._.setUTCMonth(e)},setSeconds:function(e){this._.setUTCSeconds(e)}};var U=d3.time.format.utc("%Y-%m-%dT%H:%M:%S.%LZ");d3.time.format.iso=Date.prototype.toISOString?z:U,z.parse=function(e){return new Date(e)},z.toString=U.toString,d3.time.second=function(e){return new Date(~~(e/1e3)*1e3)},d3.time.second.utc=d3.time.second,d3.time.seconds=W(d3.time.second,function(e){e.setTime(e.getTime()+1e3)},function(e){return e.getSeconds()}),d3.time.seconds.utc=d3.time.seconds,d3.time.minute=function(e){return new Date(~~(e/6e4)*6e4)},d3.time.minute.utc=d3.time.minute,d3.time.minutes=W(d3.time.minute,X,function(e){return e.getMinutes()}),d3.time.minutes.utc=W(d3.time.minute,X,function(e){return e.getUTCMinutes()}),d3.time.hour=function(e){var t=e.getTimezoneOffset()/60;return new Date((~~(e/36e5-t)+t)*36e5)},d3.time.hour.utc=function(e){return new Date(~~(e/36e5)*36e5)},d3.time.hours=W(d3.time.hour,V,function(e){return e.getHours()}),d3.time.hours.utc=W(d3.time.hour.utc,V,function(e){return e.getUTCHours()}),d3.time.day=function(e){return new Date(e.getFullYear(),e.getMonth(),e.getDate())},d3.time.day.utc=function(e){return new Date(~~(e/864e5)*864e5)},d3.time.days=W(d3.time.day,function(e){e.setDate(e.getDate()+1)},function(e){return e.getDate()-1}),d3.time.days.utc=W(d3.time.day.utc,function(e){e.setUTCDate(e.getUTCDate()+1)},function(e){return e.getUTCDate()-1}),d3.time.week=function(e){return(e=d3.time.day(e)).setDate(e.getDate()-e.getDay()),e},d3.time.week.utc=function(e){return(e=d3.time.day.utc(e)).setUTCDate(e.getUTCDate()-e.getUTCDay()),e},d3.time.weeks=W(d3.time.week,function(e){e.setDate(e.getDate()+7)},function(e){return~~((e-new Date(e.getFullYear(),0,1))/6048e5)}),d3.time.weeks.utc=W(d3.time.week.utc,function(e){e.setUTCDate(e.getUTCDate()+7)},function(e){return~~((e-Date.UTC(e.getUTCFullYear(),0,1))/6048e5)}),d3.time.month=function(e){return new Date(e.getFullYear(),e.getMonth(),1)},d3.time.month.utc=function(e){return new Date(Date.UTC(e.getUTCFullYear(),e.getUTCMonth(),1))},d3.time.months=W(d3.time.month,function(e){e.setMonth(e.getMonth()+1)},function(e){return e.getMonth()}),d3.time.months.utc=W(d3.time.month.utc,function(e){e.setUTCMonth(e.getUTCMonth()+1)},function(e){return e.getUTCMonth()}),d3.time.year=function(e){return new Date(e.getFullYear(),0,1)},d3.time.year.utc=function(e){return new Date(Date.UTC(e.getUTCFullYear(),0,1))},d3.time.years=W(d3.time.year,function(e){e.setFullYear(e.getFullYear()+1)},function(e){return e.getFullYear()}),d3.time.years.utc=W(d3.time.year.utc,function(e){e.setUTCFullYear(e.getUTCFullYear()+1)},function(e){return e.getUTCFullYear()});var G=[1e3,5e3,15e3,3e4,6e4,3e5,9e5,18e5,36e5,108e5,216e5,432e5,864e5,1728e5,6048e5,1728e6,7776e6,31536e6],Y=[[d3.time.seconds,1],[d3.time.seconds,5],[d3.time.seconds,15],[d3.time.seconds,30],[d3.time.minutes,1],[d3.time.minutes,5],[d3.time.minutes,15],[d3.time.minutes,30],[d3.time.hours,1],[d3.time.hours,3],[d3.time.hours,6],[d3.time.hours,12],[d3.time.days,1],[d3.time.days,2],[d3.time.weeks,1],[d3.time.months,1],[d3.time.months,3],[d3.time.years,1]],Z=[[d3.time.format("%Y"),function(e){return!0}],[d3.time.format("%B"),function(e){return e.getMonth()}],[d3.time.format("%b %d"),function(e){return e.getDate()!=1}],[d3.time.format("%a %d"),function(e){return e.getDay()&&e.getDate()!=1}],[d3.time.format("%I %p"),function(e){return e.getHours()}],[d3.time.format("%I:%M"),function(e){return e.getMinutes()}],[d3.time.format(":%S"),function(e){return e.getSeconds()||e.getMilliseconds()}]],et=Q(Z);d3.time.scale=function(){return $(d3.scale.linear(),Y,et)};var tt=[[d3.time.seconds.utc,1],[d3.time.seconds.utc,5],[d3.time.seconds.utc,15],[d3.time.seconds.utc,30],[d3.time.minutes.utc,1],[d3.time.minutes.utc,5],[d3.time.minutes.utc,15],[d3.time.minutes.utc,30],[d3.time.hours.utc,1],[d3.time.hours.utc,3],[d3.time.hours.utc,6],[d3.time.hours.utc,12],[d3.time.days.utc,1],[d3.time.days.utc,2],[d3.time.weeks.utc,1],[d3.time.months.utc,1],[d3.time.months.utc,3],[d3.time.years.utc,1]],nt=[[d3.time.format.utc("%Y"),function(e){return!0}],[d3.time.format.utc("%B"),function(e){return e.getUTCMonth()}],[d3.time.format.utc("%b %d"),function(e){return e.getUTCDate()!=1}],[d3.time.format.utc("%a %d"),function(e){return e.getUTCDay()&&e.getUTCDate()!=1}],[d3.time.format.utc("%I %p"),function(e){return e.getUTCHours()}],[d3.time.format.utc("%I:%M"),function(e){return e.getUTCMinutes()}],[d3.time.format.utc(":%S"),function(e){return e.getUTCSeconds()||e.getUTCMilliseconds()}]],rt=Q(nt);d3.time.scale.utc=function(){return $(d3.scale.linear(),tt,rt)}})();