(function(){function e(e){return e.map(t).join(",")}function t(e){return/[",\n]/.test(e)?'"'+e.replace(/\"/g,'""')+'"':e}d3.csv=function(e,t){d3.text(e,"text/csv",function(e){t(e&&d3.csv.parse(e))})},d3.csv.parse=function(e){var t;return d3.csv.parseRows(e,function(e,n){if(n){var r={},i=-1,s=t.length;while(++i<s)r[t[i]]=e[i];return r}return t=e,null})},d3.csv.parseRows=function(e,t){function n(){if(o.lastIndex>=e.length)return i;if(f)return f=!1,r;var t=o.lastIndex;if(e.charCodeAt(t)===34){var n=t;while(n++<e.length)if(e.charCodeAt(n)===34){if(e.charCodeAt(n+1)!==34)break;n++}o.lastIndex=n+2;var s=e.charCodeAt(n+1);return s===13?(f=!0,e.charCodeAt(n+2)===10&&o.lastIndex++):s===10&&(f=!0),e.substring(t+1,n).replace(/""/g,'"')}var u=o.exec(e);return u?(f=u[0].charCodeAt(0)!==44,e.substring(t,u.index)):(o.lastIndex=e.length,e.substring(t))}var r={},i={},s=[],o=/\r\n|[,\r\n]/g,u=0,a,f;o.lastIndex=0;while((a=n())!==i){var l=[];while(a!==r&&a!==i)l.push(a),a=n();if(t&&!(l=t(l,u++)))continue;s.push(l)}return s},d3.csv.format=function(t){return t.map(e).join("\n")}})();